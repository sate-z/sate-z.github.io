<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Python函数4 | SateZheng</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Python函数4</h1><a id="logo" href="/.">SateZheng</a><p class="description">多读书，多看报，少吃零食，多睡觉</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Python函数4</h1><div class="post-meta">Dec 15, 2016<span> | </span><span class="category"><a href="/categories/Python/">Python</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#递归"><span class="toc-number">1.</span> <span class="toc-text">递归</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#几个特殊的函数"><span class="toc-number">2.</span> <span class="toc-text">几个特殊的函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#lambda"><span class="toc-number">2.1.</span> <span class="toc-text">lambda</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter"><span class="toc-number">3.</span> <span class="toc-text">filter</span></a></li></ol></div></div><div class="post-content"><h3 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h3><p>如果用上面的做递归的定义，总感觉有点调侃，来个严肃的(选自维基百科)：</p>
<blockquote>
<p>递归（英语：Recursion），又译为递回，在数学与计算机科学中，是指在函数的定义中使用函数自身的方法。</p>
</blockquote>
<p>根据斐波那契数列的定义，可以直接写成这样的斐波那契数列递归函数。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line">    This is Fibonacci by Recursion.</div><div class="line">    """</div><div class="line">    <span class="keyword">if</span> n==<span class="number">0</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line">    <span class="keyword">elif</span> n==<span class="number">1</span>:</div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        <span class="keyword">return</span> fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    f = fib(<span class="number">10</span>)</div><div class="line">    <span class="keyword">print</span> f</div></pre></td></tr></table></figure>
<p><code>fib(n-1) + fib(n-2)</code>就是又调用了这个函数自己，实现递归。为了明确递归的过程，下面走一个计算过程（考虑到次数不能太多，就让n=3）</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.</span> n=<span class="number">3</span>,fib(<span class="number">3</span>)，自然要走return fib(<span class="number">3</span><span class="number">-1</span>) + fib(<span class="number">3</span><span class="number">-2</span>)分支</div><div class="line"><span class="number">2.</span> 先看fib(<span class="number">3</span><span class="number">-1</span>),即fib(<span class="number">2</span>)，也要走else分支，于是计算fib(<span class="number">2</span><span class="number">-1</span>) + fib(<span class="number">2</span><span class="number">-2</span>)</div><div class="line"><span class="number">3.</span> fib(<span class="number">2</span><span class="number">-1</span>)即fib(<span class="number">1</span>)，在函数中就要走elif分支，返回<span class="number">1</span>，即fib(<span class="number">2</span><span class="number">-1</span>)=<span class="number">1</span>。同理，容易得到fib(<span class="number">2</span><span class="number">-2</span>)=<span class="number">0</span>。将这两个值返回到上面一步。得到fib(<span class="number">3</span><span class="number">-1</span>)=<span class="number">1</span>+<span class="number">0</span>=<span class="number">1</span></div><div class="line"><span class="number">4.</span> 再计算fib(<span class="number">3</span><span class="number">-2</span>),就简单了一些，返回的值是<span class="number">1</span>，即fib(<span class="number">3</span><span class="number">-2</span>)=<span class="number">1</span></div><div class="line"><span class="number">5.</span> 最后计算第一步中的结果：fib(<span class="number">3</span><span class="number">-1</span>) + fib(<span class="number">3</span><span class="number">-2</span>) = <span class="number">1</span> + <span class="number">1</span> = <span class="number">2</span>，将计算结果<span class="number">2</span>作为返回值</div><div class="line"></div><div class="line">从而得到fib(<span class="number">3</span>)的结果是<span class="number">2</span>。</div></pre></td></tr></table></figure>
<p>从上面的过程中可以看出，每个递归的过程，都是向着最初的已知条件a0=0,a1=1方向挺近一步，直到通过这个最底层的条件得到结果，然后再一层一层向上回馈计算机结果。</p>
<p>其实，上面的代码有一个问题。因为a0=0,a1=1是已知的了，不需要每次都判断一边。所以，还可以优化一下。优化的基本方案就是初始化最初的两个值。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env python</span></div><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"></div><div class="line"><span class="string">"""</span></div><div class="line">the better Fibonacci</div><div class="line">"""</div><div class="line">meno = &#123;<span class="number">0</span>:<span class="number">0</span>, <span class="number">1</span>:<span class="number">1</span>&#125;    <span class="comment">#初始化</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></div><div class="line">    <span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">in</span> meno:    <span class="comment">#如果不在初始化范围内</span></div><div class="line">        meno[n] = fib(n<span class="number">-1</span>) + fib(n<span class="number">-2</span>)</div><div class="line">    <span class="keyword">return</span> meno[n]</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</div><div class="line">    f = fib(<span class="number">10</span>)</div><div class="line">    <span class="keyword">print</span> f</div><div class="line"></div><div class="line"><span class="comment">#运行结果</span></div><div class="line">$ python <span class="number">20402.</span>py </div><div class="line"><span class="number">55</span></div></pre></td></tr></table></figure>
<h3 id="几个特殊的函数"><a href="#几个特殊的函数" class="headerlink" title="几个特殊的函数"></a>几个特殊的函数</h3><p><code>filter</code>、<code>map</code>、<code>reduce</code>、<code>lambda</code>、<code>yield</code></p>
<h4 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h4><p>例子：讲<code>list</code>中每个数字增加3，并输出到新的<code>list</code>中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(x)</span>:</span>     <span class="comment">#定义一个函数，将输入的变量增加3,然后返回增加之后的值</span></div><div class="line"><span class="meta">... </span>    x += <span class="number">3</span></div><div class="line"><span class="meta">... </span>    <span class="keyword">return</span> x</div><div class="line"><span class="meta">... </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>numbers = range(<span class="number">10</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>numbers</div><div class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]  <span class="comment">#有这样一个list，想让每个数字增加3,然后输出到一个新的list中</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>new_numbers = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> numbers:</div><div class="line"><span class="meta">... </span>    new_numbers.append(add(i))  <span class="comment">#调用add()函数，并append到list中</span></div><div class="line"><span class="meta">... </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>new_numbers</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</div></pre></td></tr></table></figure>
<p>在这个例子中，add()只是一个中间操作。当然，上面的例子完全可以用别的方式实现。比如：</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; numbers = range(<span class="number">10</span>)</div><div class="line">&gt;&gt;&gt; new_numbers = [ i+<span class="number">3</span> for i in numbers ]</div><div class="line">&gt;&gt;&gt; new_numbers</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</div></pre></td></tr></table></figure>
<p>使用lambda实现，如下：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 简单的例子</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam = lambda <span class="symbol">x:</span>x+<span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam(<span class="number">1</span>)</div><div class="line"><span class="number">4</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam(<span class="number">2</span>)</div><div class="line"><span class="number">5</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam = lambda <span class="symbol">x:</span>x*<span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam(<span class="number">2</span>)</div><div class="line"><span class="number">6</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam = lambda x,<span class="symbol">y:</span>x*y</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam(<span class="number">2</span>,<span class="number">3</span>)</div><div class="line"><span class="number">6</span></div><div class="line"></div><div class="line"><span class="comment"># 实现上述方法：</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; numbers = range(<span class="number">10</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lam = lambda <span class="symbol">x:</span>x+<span class="number">3</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; n2 = []</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; for i in <span class="symbol">numbers:</span></div><div class="line">...     n2.append(lam(i))</div><div class="line">... </div><div class="line"><span class="meta">&gt;&gt;</span>&gt; n2</div><div class="line">[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>]</div></pre></td></tr></table></figure>
<p>通过上面例子，总结一下lambda函数的使用方法：</p>
<ul>
<li>在lambda后面直接跟变量</li>
<li>变量后面是冒号</li>
<li>冒号后面是表达式，表达式计算结果就是本函数的返回值</li>
</ul>
<figure class="highlight gams"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">lambda</span></span> arg1, arg2, ...argN : expression <span class="keyword">using</span> arguments</div></pre></td></tr></table></figure>
<p>要特别提醒看官：虽然lambda 函数可以接收任意多个参数 (包括可选参数) 并且返回单个表达式的值，但是lambda 函数不能包含命令，包含的表达式不能超过一个。不要试图向 lambda 函数中塞入太多的东西；如果你需要更复杂的东西，应该定义一个普通函数，然后想让它多长就多长。</p>
<p>就lambda而言，它并没有给程序带来性能上的提升，它带来的是代码的简洁。比如，要打印一个list，里面依次是某个数字的1次方，二次方，三次方，四次方。用lambda可以这样做：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>lamb = [ <span class="keyword">lambda</span> x:x,<span class="keyword">lambda</span> x:x**<span class="number">2</span>,<span class="keyword">lambda</span> x:x**<span class="number">3</span>,<span class="keyword">lambda</span> x:x**<span class="number">4</span> ]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> lamb:</div><div class="line"><span class="meta">... </span>    <span class="keyword">print</span> i(<span class="number">3</span>),</div><div class="line"><span class="meta">... </span></div><div class="line"><span class="number">3</span> <span class="number">9</span> <span class="number">27</span> <span class="number">81</span></div></pre></td></tr></table></figure>
<p>###map<br>map()是python的一个内置函数，它的基本样式是：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">map</span><span class="params">(func,seq)</span></span></div></pre></td></tr></table></figure>
<p>func是一个函数，seq是一个序列对象。在执行的时候，序列对象中的每个元素，按照从左到右的顺序，依次被取出来，并塞入到func那个函数里面，并将func的返回值依次存到一个list中。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>items = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>squared = []</div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> i <span class="keyword">in</span> items:</div><div class="line"><span class="meta">... </span>    squared.append(i**<span class="number">2</span>)</div><div class="line"><span class="meta">... </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>squared</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">sqr</span><span class="params">(x)</span>:</span> <span class="keyword">return</span> x**<span class="number">2</span></div><div class="line"><span class="meta">... </span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>map(sqr,items)</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>map(<span class="keyword">lambda</span> x: x**<span class="number">2</span>, items)</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>[ x**<span class="number">2</span> <span class="keyword">for</span> x <span class="keyword">in</span> items ]     <span class="comment">#这个我最喜欢了，一般情况下速度足够快，而且可读性强</span></div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>]</div></pre></td></tr></table></figure>
<p>理解要点：</p>
<ul>
<li>对iterable中的每个元素，依次应用function的方法（函数）（这本质上就是一个for循环）。</li>
<li>将所有结果返回一个list。</li>
<li>如果参数很多，则对那些参数并行执行function。</li>
</ul>
<p>例如:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; lst1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lst2 = [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; map(lambda x,<span class="symbol">y:</span> x+y, lst1,lst2)     <span class="comment">#将两个列表中的对应项加起来，并返回一个结果列表</span></div><div class="line">[<span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">5</span>]</div></pre></td></tr></table></figure>
<p>请看官注意了，上面这个例子如果用for循环来写，还不是很难，如果扩展一下，下面的例子用for来改写，就要小心了：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; lst1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lst2 = [<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; lst3 = [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">2</span>,<span class="number">1</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; map(lambda x,y,<span class="symbol">z:</span> x+y+z, lst1,lst2,lst3)</div><div class="line">[<span class="number">14</span>, <span class="number">17</span>, <span class="number">20</span>, <span class="number">15</span>, <span class="number">6</span>]</div></pre></td></tr></table></figure>
<p>###reduce</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; reduce(lambda x,<span class="symbol">y:</span> x+y,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</div><div class="line"><span class="number">15</span></div></pre></td></tr></table></figure>
<p>原来map是上下运算，reduce是横着逐个元素进行运算。</p>
<p>为了锻炼思维，看这么一个问题，有两个list，a = [3,9,8,5,2],b=[1,4,9,2,6],计算：a[0]b[0]+a[1]b[1]+…的结果。</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; a</div><div class="line">[<span class="number">3</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">5</span>, <span class="number">2</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; b</div><div class="line">[<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">2</span>, <span class="number">6</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; zip(a,b)        <span class="comment">#复习一下zip，下面的方法中要用到</span></div><div class="line">[(<span class="number">3</span>, <span class="number">1</span>), (<span class="number">9</span>, <span class="number">4</span>), (<span class="number">8</span>, <span class="number">9</span>), (<span class="number">5</span>, <span class="number">2</span>), (<span class="number">2</span>, <span class="number">6</span>)]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; sum(x*y for x,y in zip(a,b))    <span class="comment">#解析后直接求和</span></div><div class="line"><span class="number">133</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; new_list = [x*y for x,y in zip(a,b)]    <span class="comment">#可以看做是上面方法的分布实施</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; <span class="comment">#这样解析也可以：new_tuple = (x*y for x,y in zip(a,b))</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; new_list</div><div class="line">[<span class="number">3</span>, <span class="number">36</span>, <span class="number">72</span>, <span class="number">10</span>, <span class="number">12</span>]</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; sum(new_list)     <span class="comment">#或者:sum(new_tuple)</span></div><div class="line"><span class="number">133</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; reduce(lambda sum,(x,y): sum+x*y,zip(a,b),<span class="number">0</span>)    <span class="comment">#这个方法是在耍酷呢吗？</span></div><div class="line"><span class="number">133</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; from operator import add,mul            <span class="comment">#耍酷的方法也不止一个</span></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; reduce(add,map(mul,a,b))</div><div class="line"><span class="number">133</span></div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; reduce(lambda x,<span class="symbol">y:</span> x+y, map(lambda x,<span class="symbol">y:</span> x*y, a,b))  <span class="comment">#map,reduce,lambda都齐全了，更酷吗？</span></div><div class="line"><span class="number">133</span></div></pre></td></tr></table></figure>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p>通过下面代码体会：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;</span>&gt; numbers = range(-<span class="number">5</span>,<span class="number">5</span>)</div><div class="line"><span class="meta">&gt;&gt;</span>&gt; numbers</div><div class="line">[-<span class="number">5</span>, -<span class="number">4</span>, -<span class="number">3</span>, -<span class="number">2</span>, -<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; filter(lambda <span class="symbol">x:</span> x&gt;<span class="number">0</span>, numbers) </div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; [x for x in numbers if x&gt;<span class="number">0</span>]     <span class="comment">#与上面那句等效</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;</span>&gt; filter(lambda <span class="symbol">c:</span> c!=<span class="string">'i'</span>, <span class="string">'qiwsir'</span>)  <span class="comment">#能不能对应上面文档说明那句话呢？</span></div><div class="line"><span class="string">'qwsr'</span>                                  <span class="comment">#“If iterable is a string or a tuple, the result also has that type;”</span></div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2016/12/15/Python函数4/" data-id="ciz01rn54004ly640n9yg6pve" class="article-share-link">分享到</a><div class="tags"><a href="/tags/Python语法/">Python语法</a></div><div class="post-nav"><a href="/2016/12/15/Python类/" class="pre">Python类</a><a href="/2016/12/15/Python函数3/" class="next">Python函数3</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="Search" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Ansible/">Ansible</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ELK/">ELK</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/FTP/">FTP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Gitab/">Gitab</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Gitlab/">Gitlab</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux命令/">Linux命令</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux工具/">Linux工具</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux系统/">Linux系统</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MongoDB/">MongoDB</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Network/">Network</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">46</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python爬虫/">Python爬虫</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SVN/">SVN</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Saltstack/">Saltstack</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shell/">Shell</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VPN/">VPN</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a><span class="category-list-count">3</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Python语法/" style="font-size: 15px;">Python语法</a> <a href="/tags/Ansible/" style="font-size: 15px;">Ansible</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Gitlab/" style="font-size: 15px;">Gitlab</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/ELK/" style="font-size: 15px;">ELK</a> <a href="/tags/Gitlab，Git/" style="font-size: 15px;">Gitlab，Git</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/inode/" style="font-size: 15px;">inode</a> <a href="/tags/Logrotate/" style="font-size: 15px;">Logrotate</a> <a href="/tags/Log/" style="font-size: 15px;">Log</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/VPN/" style="font-size: 15px;">VPN</a> <a href="/tags/Python-模块/" style="font-size: 15px;">Python 模块</a> <a href="/tags/Python模块/" style="font-size: 15px;">Python模块</a> <a href="/tags/PythonScrapy/" style="font-size: 15px;">PythonScrapy</a> <a href="/tags/collections/" style="font-size: 15px;">collections</a> <a href="/tags/Anisble/" style="font-size: 15px;">Anisble</a> <a href="/tags/Python爬虫/" style="font-size: 15px;">Python爬虫</a> <a href="/tags/递归/" style="font-size: 15px;">递归</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/Saltstack/" style="font-size: 15px;">Saltstack</a> <a href="/tags/Strace/" style="font-size: 15px;">Strace</a> <a href="/tags/Tcpdump/" style="font-size: 15px;">Tcpdump</a> <a href="/tags/Zabbix/" style="font-size: 15px;">Zabbix</a> <a href="/tags/ftp/" style="font-size: 15px;">ftp</a> <a href="/tags/gitlab/" style="font-size: 15px;">gitlab</a> <a href="/tags/network/" style="font-size: 15px;">network</a> <a href="/tags/ipv6/" style="font-size: 15px;">ipv6</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/Shell/" style="font-size: 15px;">Shell</a> <a href="/tags/vpn/" style="font-size: 15px;">vpn</a> <a href="/tags/Mysql/" style="font-size: 15px;">Mysql</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/11/Shadowsocks-服务端和客户端/">Shadowsocks_服务端和客户端</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/16/Python-paramiko模块/">Python_paramiko模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/16/Python-ConfigParser模块/">Python_ConfigParser模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Python-collections模块-deque/">Python_collections模块--deque</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Python-collections模块-nametuple/">Python_collections模块--nametuple</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Python-collections模块-defaultdict/">Python_collections模块--defaultdict</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Python-collections模块-OrderedDict/">Python_collections模块--OrderedDict</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/09/Python-collections模块-Counter/">Python_collections模块--Counter</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/15/Python-Scrapy入门/">Python_Scrapy入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/15/Python-Scrapy命令行工具/">Python_Scrapy命令行工具</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://luxinle.github.io/" title="卢会军的技术博客" target="_blank">卢会军的技术博客</a><ul></ul><a href="http://qinyueming.cc/" title="秦悦明的技术博客" target="_blank">秦悦明的技术博客</a><ul></ul><a href="http://www.jianshu.com/users/a4a7b9d0c23e/latest_articles" title="我的简书" target="_blank">我的简书</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">SateZheng.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>